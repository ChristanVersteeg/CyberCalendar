name: Direct JSON parsing example

on:
  workflow_dispatch:

jobs:
  parse-array:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repo
        uses: actions/checkout@v3

      - name: Put JSON array into output
        id: set_json
        run: |
          # Instead of writing to a file, we store it in an output
          echo "json_array=${{ secrets.TEXT_ARRAY }}" >> $GITHUB_OUTPUT

      - name: Parse snippet directly
        run: |
          # We'll parse it inline in Python
          dailySnippet=$(python -c "import json; import sys; data=json.loads('${{ steps.set_json.outputs.json_array }}'); print(data[0])")

          echo "First snippet is: $dailySnippet"
